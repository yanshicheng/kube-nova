syntax = "v1"

info(
    title: "Container Registry API"
    desc: "å®¹å™¨é•œåƒä»“åº“ç®¡ç† API"
    author: "Yan Shicheng"
    email: "ikubeops@gmail.com"
    version: "1.0"
)


type (
    //================================é•œåƒä»“åº“åŸºç¡€æ•°æ®ç»“æ„================================
    ContainerRegistry {
        Id uint64 `json:"id"`
        Name string `json:"name"`
        Uuid string `json:"uuid"`
        Type string `json:"type"`
        Env string `json:"env"`
        Url string `json:"url"`
        Username string `json:"username"`
        Password string `json:"password,optional"`
        Insecure bool `json:"insecure"`
        CaCert string `json:"caCert,optional"`
        Config string `json:"config,optional"`
        Status int32 `json:"status"`
        Description string `json:"description,optional"`
        CreatedBy string `json:"createdBy,optional"`
        UpdatedBy string `json:"updatedBy,optional"`
        CreatedAt int64 `json:"createdAt"`
        UpdatedAt int64 `json:"updatedAt"`
        StorageTotal int64 `json:"storageTotal,optional"`
        TotalProjects int64 `json:"totalProjects,optional"`
        TotalRepositories int64 `json:"totalRepositories,optional"`
    }

    ContainerRegistryDetails {
        Id uint64 `json:"id"`
        Name string `json:"name"`
        Uuid string `json:"uuid"`
        Type string `json:"type"`
        Env string `json:"env"`
        Url string `json:"url"`
        Username string `json:"username"`
        Password string `json:"password,optional"`
        Insecure bool `json:"insecure"`
        CaCert string `json:"caCert,optional"`
        Config string `json:"config,optional"`
        Status int32 `json:"status"`
        Description string `json:"description,optional"`
        CreatedBy string `json:"createdBy,optional"`
        UpdatedBy string `json:"updatedBy,optional"`
        CreatedAt int64 `json:"createdAt"`
        UpdatedAt int64 `json:"updatedAt"`
        StorageTotal int64 `json:"storageTotal,optional"`
        StorageUsed int64 `json:"storageUsed,optional"`
        StorageFree int64 `json:"storageFree,optional"`
        TotalProjects int64 `json:"totalProjects,optional"`
        PublicProjects int64 `json:"publicProjects,optional"`
        PrivateProjects int64 `json:"privateProjects,optional"`
        TotalRepositories int64 `json:"totalRepositories,optional"`
        PublicRepositories int64 `json:"publicRepositories,optional"`
        PrivateRepositories int64 `json:"privateRepositories,optional"`
    }

        //================================ä»“åº“ä¸é›†ç¾¤å…³è”æ•°æ®ç»“æ„================================
    RegistryCluster {
        Id uint64 `json:"id"`
        RegistryId uint64 `json:"registryId"`
        ClusterUuid string `json:"clusterUuid"`
        CreatedAt int64 `json:"createdAt"`
        UpdatedAt int64 `json:"updatedAt"`
        Registry *ContainerRegistry `json:"registry,optional"`
    }

        //================================ä»“åº“é¡¹ç›®ä¸åº”ç”¨é¡¹ç›®ç»‘å®šæ•°æ®ç»“æ„================================
    RegistryProjectBinding {
        Id uint64 `json:"id"`
        RegistryId uint64 `json:"registryId"`
        AppProjectId uint64 `json:"appProjectId"`
        RegistryProjectName string `json:"registryProjectName"`
        RegistryProjectId string `json:"registryProjectId,optional"`
        CreatedAt int64 `json:"createdAt"`
        UpdatedAt int64 `json:"updatedAt"`
        Registry *ContainerRegistry `json:"registry,optional"`
        ClusterUuid string `json:"clusterUuid,optional"`
    }

        //================================é•œåƒä»“åº“ CRUD================================
    CreateRegistryRequest {
        Name string `json:"name" validate:"required,min=1,max=64"`
        Type string `json:"type" validate:"required,oneof=harbor docker-registry nexus"`
        Env string `json:"env" validate:"required,oneof=dev test staging prod"`
        Url string `json:"url" validate:"required,url"`
        Username string `json:"username" validate:"required"`
        Password string `json:"password" validate:"required"`
        Insecure bool `json:"insecure"`
        CaCert string `json:"caCert,optional"`
        Config string `json:"config,optional"`
        Status int32 `json:"status" validate:"required,oneof=0 1"`
        Description string `json:"description,optional" validate:"max=500"`
        CreatedBy string `json:"createdBy" validate:"required"`
    }
    CreateRegistryResponse {
        Uuid string `json:"uuid"`
        Message string `json:"message"`
    }

    UpdateRegistryRequest {
        Id uint64 `path:"id" validate:"required,min=1"`
        Name string `json:"name" validate:"required,min=1,max=64"`
        Type string `json:"type" validate:"required,oneof=harbor docker-registry nexus"`
        Env string `json:"env" validate:"required,oneof=dev test staging prod"`
        Url string `json:"url" validate:"required,url"`
        Username string `json:"username" validate:"required"`
        Password string `json:"password" validate:"required"`
        Insecure bool `json:"insecure"`
        CaCert string `json:"caCert,optional"`
        Config string `json:"config,optional"`
        Status int32 `json:"status" validate:"required,oneof=0 1"`
        Description string `json:"description,optional" validate:"max=500"`
        UpdatedBy string `json:"updatedBy" validate:"required"`
    }
    UpdateRegistryResponse {
        Message string `json:"message"`
    }

    DeleteRegistryRequest {
        Id uint64 `path:"id" validate:"required,min=1"`
    }
    DeleteRegistryResponse {
        Message string `json:"message"`
    }

    GetRegistryByUuidRequest {
        Uuid string `path:"uuid" validate:"required"`
    }
    GetRegistryByUuidResponse {
        Data ContainerRegistry `json:"data"`
    }

    GetRegistryDetailsRequest {
        Uuid string `path:"uuid" validate:"required"`
    }
    GetRegistryDetailsResponse {
        Data ContainerRegistryDetails `json:"data"`
    }

    TestRegistryConnectionRequest {
        Url string `json:"url" validate:"required,url"`
        Username string `json:"username" validate:"required"`
        Password string `json:"password" validate:"required"`
        Insecure bool `json:"insecure"`
        CaCert string `json:"caCert,optional"`
        Type string `json:"type" validate:"required,oneof=harbor docker-registry nexus"`
    }
    TestRegistryConnectionResponse {
        Success bool `json:"success"`
        Message string `json:"message"`
    }

        //================================ä»“åº“æŸ¥è¯¢================================
    ListRegistriesRequest {
        Page uint64 `form:"page,default=1" validate:"min=1"`
        PageSize uint64 `form:"pageSize,default=20" validate:"min=1,max=100"`
        OrderBy string `form:"orderBy,optional"`
        IsAsc bool `form:"isAsc,default=true"`
        Name string `form:"name,optional"`
        Uuid string `form:"uuid,optional"`
        Env string `form:"env,optional" validate:"omitempty,oneof=dev test staging prod"`
        Type string `form:"type,optional" validate:"omitempty,oneof=harbor docker-registry nexus"`
        Status int32 `form:"status,optional" validate:"omitempty,oneof=0 1"`
    }
    ListRegistriesResponse {
        Data []ContainerRegistry `json:"data"`
        Total uint64 `json:"total"`
    }

    ListRegistriesByProjectRequest {
        AppProjectId uint64 `form:"appProjectId" validate:"required,min=1"`
        ClusterUuid string `form:"clusterUuid" validate:"required"`
        Page uint64 `form:"page,default=1" validate:"min=1"`
        PageSize uint64 `form:"pageSize,default=20" validate:"min=1,max=100"`
        OrderBy string `form:"orderBy,optional"`
        IsAsc bool `form:"isAsc,default=true"`
        Name string `form:"name,optional"`
        Env string `form:"env,optional" validate:"omitempty,oneof=dev test staging prod"`
        Type string `form:"type,optional" validate:"omitempty,oneof=harbor docker-registry nexus"`
    }
    ListRegistriesByProjectResponse {
        Data []ContainerRegistry `json:"data"`
        Total uint64 `json:"total"`
    }

        //================================ä»“åº“ä¸é›†ç¾¤å…³è”================================
    BindRegistryToClusterRequest {
        RegistryId uint64 `json:"registryId" validate:"required,min=1"`
        ClusterUuid string `json:"clusterUuid" validate:"required"`
    }
    BindRegistryToClusterResponse {
        Id uint64 `json:"id"`
        Message string `json:"message"`
    }

    UnbindRegistryFromClusterRequest {
        Id uint64 `path:"id" validate:"required,min=1"`
    }
    UnbindRegistryFromClusterResponse {
        Message string `json:"message"`
    }

    ListClusterRegistriesRequest {
        ClusterUuid string `form:"clusterUuid" validate:"required"`
        RegistryId uint64 `form:"registryId,optional"`
    }
    ListClusterRegistriesResponse {
        Data []RegistryCluster `json:"data"`
    }

    ListRegistryClustersRequest {
        RegistryId uint64 `form:"registryId" validate:"required,min=1"`
    }
    ListRegistryClustersResponse {
        Data []RegistryCluster `json:"data"`
    }

        //================================ä»“åº“é¡¹ç›®ä¸åº”ç”¨é¡¹ç›®ç»‘å®š================================
    BindRegistryProjectRequest {
        RegistryId uint64 `json:"registryId" validate:"required,min=1"`
        AppProjectId uint64 `json:"appProjectId" validate:"required,min=1"`
        RegistryProjectName string `json:"registryProjectName" validate:"required"`
        RegistryProjectId string `json:"registryProjectId,optional"`
    }
    BindRegistryProjectResponse {
        Id uint64 `json:"id"`
        Message string `json:"message"`
    }

    UnbindRegistryProjectRequest {
        Id uint64 `path:"id" validate:"required,min=1"`
    }
    UnbindRegistryProjectResponse {
        Message string `json:"message"`
    }

    ListProjectRegistryBindingsRequest {
        RegistryId uint64 `form:"registryId,optional" validate:"required,min=1"`
        RegistryProjectName string `form:"registryProjectName,optional" validate:"required"`
    }
    BindProjectIds {
        Id uint64 `json:"id"`              // ç»‘å®šè®°å½•ID
        ProjectId uint64 `json:"projectId"` // ä¸šåŠ¡é¡¹ç›®ID
    }
    ListProjectRegistryBindingsResponse {
        Data []BindProjectIds `json:"data"` 
    }

        //================================ä»“åº“é¡¹ç›®æ“ä½œ================================
    RegistryProject {
        ProjectId int64 `json:"projectId"`
        Name string `json:"name"`
        OwnerName string `json:"ownerName,optional"`
        IsPublic bool `json:"isPublic"`
        RepoCount int64 `json:"repoCount"`
        StorageLimit        int64  `json:"storageLimit"`         // å­—èŠ‚æ•°
        StorageUsed         int64  `json:"storageUsed"`          // å­—èŠ‚æ•°
        StorageLimitDisplay string `json:"storageLimitDisplay"` // å¦‚ "10.00GB"
        StorageUsedDisplay  string `json:"storageUsedDisplay"`  // å¦‚ "5.00GB"
        CreationTime int64 `json:"creationTime"`
        UpdateTime int64 `json:"updateTime"`
    }

    ListProjectsRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        Search string `form:"search,optional"`
        Page int64 `form:"page,default=1" validate:"min=1"`
        PageSize int64 `form:"pageSize,default=20" validate:"min=1,max=100"`
        SortBy string `form:"sortBy,optional"`
        SortDesc bool `form:"sortDesc,default=false"`
    }
    ListProjectsResponse {
        Items []RegistryProject `json:"items"`
        Total int64 `json:"total"`
        Page int64 `json:"page"`
        PageSize int64 `json:"pageSize"`
        TotalPages int64 `json:"totalPages"`
    }

    ListProjectsByAppRequest {
        AppProjectId uint64 `form:"appProjectId" validate:"required,min=1"`
        ClusterUuid string `form:"clusterUuid" validate:"required"`
        RegistryUuid string `form:"registryUuid" validate:"required"`
        Search string `form:"search,optional"`
        Page int64 `form:"page,default=1" validate:"min=1"`
        PageSize int64 `form:"pageSize,default=20" validate:"min=1,max=100"`
        SortBy string `form:"sortBy,optional"`
        SortDesc bool `form:"sortDesc,default=false"`
    }
    ListProjectsByAppResponse {
        Items []RegistryProject `json:"items"`
        Total int64 `json:"total"`
        Page int64 `json:"page"`
        PageSize int64 `json:"pageSize"`
        TotalPages int64 `json:"totalPages"`
    }

    GetProjectRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        ProjectName string `path:"projectName" validate:"required"`
    }
    GetProjectResponse {
        Data RegistryProject `json:"data"`
    }

    CreateProjectRequest {
        RegistryUuid string `json:"registryUuid" validate:"required"`
        ProjectName string `json:"projectName" validate:"required,min=2,max=255"`
        IsPublic bool `json:"isPublic"`
        StorageLimit int64 `json:"storageLimit,optional" validate:"min=-1"`
        StorageUnit string `json:"storageUnit,optional,default=GB" validate:"omitempty,oneof=B KB MB GB TB"` // ğŸ†• æ–°å¢
        AppProjectId uint64 `json:"appProjectId,optional"`
        ClusterUuid string `json:"clusterUuid,optional"`
    }
    CreateProjectResponse {
    }

    UpdateProjectRequest {
        RegistryUuid string `json:"registryUuid" validate:"required"`
        ProjectName string `path:"projectName" validate:"required"`
        IsPublic bool `json:"isPublic"`
        StorageLimit int64 `json:"storageLimit,optional" validate:"min=-1"`
        StorageUnit string `json:"storageUnit,optional,default=GB" validate:"omitempty,oneof=B KB MB GB TB"` // ğŸ†• æ–°å¢
    }
    UpdateProjectResponse {
    }

    DeleteProjectRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        ProjectName string `path:"projectName" validate:"required"`
    }
    DeleteProjectResponse {
        Message string `json:"message"`
    }

        //================================Repository æ“ä½œ================================
    Repository {
        Id int64 `json:"id"`
        Name string `json:"name"`
        ProjectId int64 `json:"projectId"`
        ProjectName string `json:"projectName"`
        Description string `json:"description,optional"`
        ArtifactCount int64 `json:"artifactCount"`
        PullCount int64 `json:"pullCount"`
        CreationTime int64 `json:"creationTime"`
        UpdateTime int64 `json:"updateTime"`
    }

    ListRepositoriesRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        ProjectName string `form:"projectName" validate:"required"`
        Search string `form:"search,optional"`
        Page int64 `form:"page,default=1" validate:"min=1"`
        PageSize int64 `form:"pageSize,default=20" validate:"min=1,max=100"`
        SortBy string `form:"sortBy,optional"`
        SortDesc bool `form:"sortDesc,default=false"`
    }
    ListRepositoriesResponse {
        Items []Repository `json:"items"`
        Total int64 `json:"total"`
        Page int64 `json:"page"`
        PageSize int64 `json:"pageSize"`
        TotalPages int64 `json:"totalPages"`
    }

    GetRepositoryRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        ProjectName string `form:"projectName" validate:"required"`
        RepoName string `path:"repoName" validate:"required"`
    }
    GetRepositoryResponse {
        Data Repository `json:"data"`
    }

    DeleteRepositoryRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        ProjectName string `form:"projectName" validate:"required"`
        RepoName string `path:"repoName" validate:"required"`
    }
    DeleteRepositoryResponse {
        Message string `json:"message"`
    }

        //================================åˆ¶å“/æ ‡ç­¾æ“ä½œ================================
    Tag {
        Id int64 `json:"id"`
        Name string `json:"name"`
        PushTime int64 `json:"pushTime"`
        PullTime int64 `json:"pullTime"`
        Immutable bool `json:"immutable"`
        Signed bool `json:"signed"`
    }

    Artifact {
        Id int64 `json:"id"`
        Type string `json:"type"`
        Digest string `json:"digest"`
        Tags []Tag `json:"tags"`
        PushTime int64 `json:"pushTime"`
        PullTime int64 `json:"pullTime"`
        Size int64 `json:"size"`
        ManifestMediaType string `json:"manifestMediaType"`
    }

    ListArtifactsRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        ProjectName string `form:"projectName" validate:"required"`
        RepoName string `form:"repoName" validate:"required"`
        Search string `form:"search,optional"`
        Page int64 `form:"page,default=1" validate:"min=1"`
        PageSize int64 `form:"pageSize,default=20" validate:"min=1,max=100"`
        SortBy string `form:"sortBy,optional"`
        SortDesc bool `form:"sortDesc,default=false"`
    }
    ListArtifactsResponse {
        Items []Artifact `json:"items"`
        Total int64 `json:"total"`
        Page int64 `json:"page"`
        PageSize int64 `json:"pageSize"`
        TotalPages int64 `json:"totalPages"`
    }

    GetArtifactRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        ProjectName string `form:"projectName" validate:"required"`
        RepoName string `form:"repoName" validate:"required"`
        Reference string `path:"reference" validate:"required"`
    }
    GetArtifactResponse {
        Data Artifact `json:"data"`
    }

    DeleteArtifactRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        ProjectName string `form:"projectName" validate:"required"`
        RepoName string `form:"repoName" validate:"required"`
        Reference string `path:"reference" validate:"required"`
    }
    DeleteArtifactResponse {
        Message string `json:"message"`
    }

    DeleteTagRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        ProjectName string `form:"projectName" validate:"required"`
        RepoName string `form:"repoName" validate:"required"`
        TagName string `path:"tagName" validate:"required"`
    }
    DeleteTagResponse {
        Message string `json:"message"`
    }

        //================================é•œåƒæœç´¢================================
    ImageSearchResult {
        ProjectName string `json:"projectName"`
        RepoName string `json:"repoName"`
        Tags []string `json:"tags"`
        ArtifactCount int64 `json:"artifactCount"`
        PullCount int64 `json:"pullCount"`
    }

    RegistryImageSearchResult {
        RegistryName string `json:"registryName"`
        RegistryUuid string `json:"registryUuid"`
        RegistryUrl string `json:"registryUrl"`
        Images []ImageSearchResult `json:"images"`
    }

    SearchImagesGlobalRequest {
        ImageName string `form:"imageName" validate:"required,min=1"`
        RegistryType string `form:"registryType,optional" validate:"omitempty,oneof=harbor docker-registry nexus"`
        Env string `form:"env,optional" validate:"omitempty,oneof=dev test staging prod"`
        Page int64 `form:"page,default=1" validate:"min=1"`
        PageSize int64 `form:"pageSize,default=20" validate:"min=1,max=100"`
    }
    SearchImagesGlobalResponse {
        Data []RegistryImageSearchResult `json:"data"`
        Total int64 `json:"total"`
    }

    SearchImagesGlobalByProjectRequest {
        AppProjectId uint64 `form:"appProjectId" validate:"required,min=1"`
        ClusterUuid string `form:"clusterUuid" validate:"required"`
        ImageName string `form:"imageName" validate:"required,min=1"`
        Page int64 `form:"page,default=1" validate:"min=1"`
        PageSize int64 `form:"pageSize,default=20" validate:"min=1,max=100"`
    }
    SearchImagesGlobalByProjectResponse {
        Data []RegistryImageSearchResult `json:"data"`
        Total int64 `json:"total"`
    }

    SearchImagesInRegistryRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        ImageName string `form:"imageName" validate:"required,min=1"`
        Page int64 `form:"page,default=1" validate:"min=1"`
        PageSize int64 `form:"pageSize,default=20" validate:"min=1,max=100"`
    }
    SearchImagesInRegistryResponse {
        Data []ImageSearchResult `json:"data"`
        Total int64 `json:"total"`
    }

    SearchImagesInRegistryByProjectRequest {
        AppProjectId uint64 `form:"appProjectId" validate:"required,min=1"`
        ClusterUuid string `form:"clusterUuid" validate:"required"`
        RegistryUuid string `form:"registryUuid" validate:"required"`
        ImageName string `form:"imageName" validate:"required,min=1"`
        Page int64 `form:"page,default=1" validate:"min=1"`
        PageSize int64 `form:"pageSize,default=20" validate:"min=1,max=100"`
    }
    SearchImagesInRegistryByProjectResponse {
        Data []ImageSearchResult `json:"data"`
        Total int64 `json:"total"`
    }

        //================================é…é¢ç®¡ç†================================
    ProjectQuota {
        StorageLimit int64 `json:"storageLimit"`
        StorageUsed int64 `json:"storageUsed, optional"`
        CountLimit int64 `json:"countLimit, optional"`
        CountUsed int64 `json:"countUsed, optional"`
    }

    GetProjectQuotaRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        ProjectName string `path:"projectName" validate:"required"`
    }
    GetProjectQuotaResponse {
        Data ProjectQuota `json:"data"`
    }

    UpdateProjectQuotaRequest {
        RegistryUuid string `json:"registryUuid" validate:"required"`
        ProjectName string `path:"projectName" validate:"required"`
        StorageLimit int64 `json:"storageLimit" validate:"min=-1"`
        StorageUnit string `json:"storageUnit,optional,default=GB" validate:"omitempty,oneof=B KB MB GB TB"` // ğŸ†• æ–°å¢
        CountLimit int64 `json:"countLimit, optional" validate:"min=-1"`
    }
    UpdateProjectQuotaResponse {
    }


        //================================é¡¹ç›®æˆå‘˜ç®¡ç†================================
    ProjectMember {
        Id int64 `json:"id"`
        ProjectId int64 `json:"projectId"`
        EntityName string `json:"entityName"`
        EntityType string `json:"entityType"`
        RoleId int64 `json:"roleId"`
        RoleName string `json:"roleName"`
        CreationTime int64 `json:"creationTime"`
        UpdateTime int64 `json:"updateTime"`
    }

    ListProjectMembersRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        ProjectName string `form:"projectName" validate:"required"`
        Search string `form:"search,optional"`
        Page int64 `form:"page,default=1" validate:"min=1"`
        PageSize int64 `form:"pageSize,default=20" validate:"min=1,max=100"`
    }
    ListProjectMembersResponse {
        Items []ProjectMember `json:"items"`
        Total int64 `json:"total"`
        Page int64 `json:"page"`
        PageSize int64 `json:"pageSize"`
        TotalPages int64 `json:"totalPages"`
    }

    GetProjectMemberRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        ProjectName string `form:"projectName" validate:"required"`
        MemberId int64 `path:"memberId" validate:"required"`
    }
    GetProjectMemberResponse {
        Data ProjectMember `json:"data"`
    }

    AddProjectMemberRequest {
        RegistryUuid string `json:"registryUuid" validate:"required"`
        ProjectName string `json:"projectName" validate:"required"`
        MemberUser string `json:"memberUser" validate:"required"`
        RoleId int64 `json:"roleId" validate:"required,min=1,max=4"`
    }
    AddProjectMemberResponse {
        Id int64 `json:"id"`
        Message string `json:"message"`
    }

    UpdateProjectMemberRequest {
        RegistryUuid string `json:"registryUuid" validate:"required"`
        ProjectName string `json:"projectName" validate:"required"`
        MemberId int64 `path:"memberId" validate:"required"`
        RoleId int64 `json:"roleId" validate:"required,min=1,max=4"`
    }
    UpdateProjectMemberResponse {
        Message string `json:"message"`
    }

    DeleteProjectMemberRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        ProjectName string `form:"projectName" validate:"required"`
        MemberId int64 `path:"memberId" validate:"required"`
    }
    DeleteProjectMemberResponse {
        Message string `json:"message"`
    }

        //================================å…¨å±€ç”¨æˆ·ç®¡ç†================================
    HarborUser {
        UserId int64 `json:"userId"`
        Username string `json:"username"`
        Email string `json:"email"`
        Realname string `json:"realname"`
        Comment string `json:"comment"`
        CreationTime int64 `json:"creationTime"`
        UpdateTime int64 `json:"updateTime"`
        SysadminFlag bool `json:"sysadminFlag"`
        AdminRoleInAuth bool `json:"adminRoleInAuth"`
    }

    CreateUserRequest {
        RegistryUuid string `json:"registryUuid" validate:"required"`
        Username string `json:"username" validate:"required,min=2,max=255"`
        Email string `json:"email" validate:"required,email"`
        Realname string `json:"realname" validate:"required"`
        Password string `json:"password" validate:"required,min=8"`
        Comment string `json:"comment,optional"`
    }
    CreateUserResponse {
        UserId int64 `json:"userId"`
        Message string `json:"message"`
    }

    ListUsersRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        Search string `form:"search,optional"`
        Page int64 `form:"page,default=1" validate:"min=1"`
        PageSize int64 `form:"pageSize,default=20" validate:"min=1,max=100"`
    }
    ListUsersResponse {
        Items []HarborUser `json:"items"`
        Total int64 `json:"total"`
        Page int64 `json:"page"`
        PageSize int64 `json:"pageSize"`
        TotalPages int64 `json:"totalPages"`
    }

    GetUserRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        UserId int64 `path:"userId" validate:"required"`
    }
    GetUserResponse {
        Data HarborUser `json:"data"`
    }

    UpdateUserRequest {
        RegistryUuid string `json:"registryUuid" validate:"required"`
        UserId int64 `path:"userId" validate:"required"`
        Email string `json:"email,optional" validate:"omitempty,email"`
        Realname string `json:"realname,optional"`
        Comment string `json:"comment,optional"`
    }
    UpdateUserResponse {
        Message string `json:"message"`
    }

    DeleteUserRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        UserId int64 `path:"userId" validate:"required"`
    }
    DeleteUserResponse {
        Message string `json:"message"`
    }

    ChangeUserPasswordRequest {
        RegistryUuid string `json:"registryUuid" validate:"required"`
        UserId int64 `path:"userId" validate:"required"`
        OldPassword string `json:"oldPassword" validate:"required"`
        NewPassword string `json:"newPassword" validate:"required,min=8"`
    }
    ChangeUserPasswordResponse {
        Message string `json:"message"`
    }

    SetUserAdminRequest {
        RegistryUuid string `json:"registryUuid" validate:"required"`
        UserId int64 `path:"userId" validate:"required"`
        SysadminFlag bool `json:"sysadminFlag"`
    }
    SetUserAdminResponse {
        Message string `json:"message"`
    }
)


//================================åƒåœ¾å›æ”¶ç®¡ç†================================
type (
    GCHistory {
        Id int64 `json:"id"`
        JobName string `json:"jobName"`
        JobKind string `json:"jobKind"`
        JobStatus string `json:"jobStatus"`
        CreationTime int64 `json:"creationTime"`
        UpdateTime int64 `json:"updateTime"`
        DeleteUntagged bool `json:"deleteUntagged"`
        JobParameters string `json:"jobParameters,optional"`
    }

    GCSchedule {
        Schedule string `json:"schedule"`
        Parameters map[string]string `json:"parameters"`
    }

    ListGCHistoryRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        Page int64 `form:"page,default=1" validate:"min=1"`
        PageSize int64 `form:"pageSize,default=20" validate:"min=1,max=100"`
    }
    ListGCHistoryResponse {
        Items []GCHistory `json:"items"`
        Total int64 `json:"total"`
        Page int64 `json:"page"`
        PageSize int64 `json:"pageSize"`
        TotalPages int64 `json:"totalPages"`
    }

    GetGCRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        GcId int64 `path:"gcId" validate:"required"`
    }
    GetGCResponse {
        Data GCHistory `json:"data"`
    }

    GetGCLogRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        GcId int64 `path:"gcId" validate:"required"`
    }
    GetGCLogResponse {
        Log string `json:"log"`
    }

    GetGCScheduleRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
    }
    GetGCScheduleResponse {
        Data GCSchedule `json:"data"`
    }

    UpdateGCScheduleRequest {
        RegistryUuid string `json:"registryUuid" validate:"required"`
        Schedule string `json:"schedule"`
        DeleteUntagged bool `json:"deleteUntagged"`
    }
    UpdateGCScheduleResponse {
        Message string `json:"message"`
    }

    TriggerGCRequest {
        RegistryUuid string `json:"registryUuid" validate:"required"`
        DeleteUntagged bool `json:"deleteUntagged"`
        Workers int32 `json:"workers,optional"`
    }
    TriggerGCResponse {
        JobId int64 `json:"jobId"`
        Message string `json:"message"`
    }
)

//================================ä¿ç•™ç­–ç•¥ç®¡ç†================================
type (
    RetentionRule {
        Id int64 `json:"id,optional"`
        Priority int32 `json:"priority"`
        Disabled bool `json:"disabled"`
        Action string `json:"action"`
        Template string `json:"template"`
        Params map[string]string `json:"params"`
        TagSelectors string `json:"tagSelectors"`
        ScopeSelectors string `json:"scopeSelectors"`
    }

    RetentionPolicy {
        Id int64 `json:"id"`
        Algorithm string `json:"algorithm"`
        Rules []RetentionRule `json:"rules"`
        Trigger string `json:"trigger"`
        Scope string `json:"scope"`
        CreateTime int64 `json:"createTime"`
        UpdateTime int64 `json:"updateTime"`
    }

    RetentionExecution {
        Id int64 `json:"id"`
        PolicyId int64 `json:"policyId"`
        Status string `json:"status"`
        Trigger string `json:"trigger"`
        StartTime int64 `json:"startTime"`
        EndTime int64 `json:"endTime"`
        DryRun int32 `json:"dryRun"`
    }

    GetRetentionPolicyRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        ProjectName string `form:"projectName" validate:"required"`
    }
    GetRetentionPolicyResponse {
        Data RetentionPolicy `json:"data"`
    }

    CreateRetentionPolicyRequest {
        RegistryUuid string `json:"registryUuid" validate:"required"`
        ProjectName string `json:"projectName" validate:"required"`
        Algorithm string `json:"algorithm" validate:"required"`
        Rules []RetentionRule `json:"rules" validate:"required"`
        Schedule string `json:"schedule,optional"`
    }
    CreateRetentionPolicyResponse {
        Id int64 `json:"id"`
        Message string `json:"message"`
    }

    UpdateRetentionPolicyRequest {
        RegistryUuid string `json:"registryUuid" validate:"required"`
        PolicyId int64 `json:"policyId" validate:"required"`
        Algorithm string `json:"algorithm" validate:"required"`
        Rules []RetentionRule `json:"rules" validate:"required"`
        Schedule string `json:"schedule,optional"`
    }
    UpdateRetentionPolicyResponse {
        Message string `json:"message"`
    }

    ExecuteRetentionPolicyRequest {
        RegistryUuid string `json:"registryUuid" validate:"required"`
        PolicyId int64 `json:"policyId" validate:"required"`
        DryRun bool `json:"dryRun"`
    }
    ExecuteRetentionPolicyResponse {
        ExecutionId int64 `json:"executionId"`
        Message string `json:"message"`
    }

    ListRetentionExecutionsRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        PolicyId int64 `form:"policyId" validate:"required"`
        Page int64 `form:"page,default=1" validate:"min=1"`
        PageSize int64 `form:"pageSize,default=20" validate:"min=1,max=100"`
    }
    ListRetentionExecutionsResponse {
        Items []RetentionExecution `json:"items"`
        Total int64 `json:"total"`
        Page int64 `json:"page"`
        PageSize int64 `json:"pageSize"`
        TotalPages int64 `json:"totalPages"`
    }
)

//================================å¤åˆ¶ç­–ç•¥ç®¡ç†================================
type (
    ReplicationFilter {
        Type string `json:"type"`
        Value string `json:"value"`
        Decoration string `json:"decoration,optional"`
    }

    ReplicationTrigger {
        Type string `json:"type"`
        TriggerSettings map[string]string `json:"triggerSettings,optional"`
    }

    ReplicationPolicy {
        Id int64 `json:"id"`
        Name string `json:"name"`
        Description string `json:"description,optional"`
        SrcRegistry int64 `json:"srcRegistry"`
        DestRegistry int64 `json:"destRegistry"`
        DestNamespace string `json:"destNamespace,optional"`
        Filters []ReplicationFilter `json:"filters,optional"`
        Trigger ReplicationTrigger `json:"trigger"`
        Deletion bool `json:"deletion"`
        Override bool `json:"override"`
        Enabled bool `json:"enabled"`
        CreationTime int64 `json:"creationTime"`
        UpdateTime int64 `json:"updateTime"`
    }

    ReplicationExecution {
        Id int64 `json:"id"`
        PolicyId int64 `json:"policyId"`
        Status string `json:"status"`
        Trigger string `json:"trigger"`
        StartTime int64 `json:"startTime"`
        EndTime int64 `json:"endTime"`
        Succeed int64 `json:"succeed"`
        Failed int64 `json:"failed"`
        InProgress int64 `json:"inProgress"`
        Stopped int64 `json:"stopped"`
    }

    ListReplicationPoliciesRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        Name string `form:"name,optional"`
        Page int64 `form:"page,default=1" validate:"min=1"`
        PageSize int64 `form:"pageSize,default=20" validate:"min=1,max=100"`
    }
    ListReplicationPoliciesResponse {
        Items []ReplicationPolicy `json:"items"`
        Total int64 `json:"total"`
        Page int64 `json:"page"`
        PageSize int64 `json:"pageSize"`
        TotalPages int64 `json:"totalPages"`
    }

    GetReplicationPolicyRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        PolicyId int64 `path:"policyId" validate:"required"`
    }
    GetReplicationPolicyResponse {
        Data ReplicationPolicy `json:"data"`
    }

    CreateReplicationPolicyRequest {
        RegistryUuid string `json:"registryUuid" validate:"required"`
        Name string `json:"name" validate:"required"`
        Description string `json:"description,optional"`
        SrcRegistry int64 `json:"srcRegistry" validate:"required"`
        DestRegistry int64 `json:"destRegistry" validate:"required"`
        DestNamespace string `json:"destNamespace,optional"`
        Filters []ReplicationFilter `json:"filters,optional"`
        Trigger ReplicationTrigger `json:"trigger" validate:"required"`
        Deletion bool `json:"deletion"`
        Override bool `json:"override"`
        Enabled bool `json:"enabled"`
    }
    CreateReplicationPolicyResponse {
        Id int64 `json:"id"`
        Message string `json:"message"`
    }

    UpdateReplicationPolicyRequest {
        RegistryUuid string `json:"registryUuid" validate:"required"`
        PolicyId int64 `path:"policyId" validate:"required"`
        Name string `json:"name" validate:"required"`
        Description string `json:"description,optional"`
        SrcRegistry int64 `json:"srcRegistry" validate:"required"`
        DestRegistry int64 `json:"destRegistry" validate:"required"`
        DestNamespace string `json:"destNamespace,optional"`
        Filters []ReplicationFilter `json:"filters,optional"`
        Trigger ReplicationTrigger `json:"trigger" validate:"required"`
        Deletion bool `json:"deletion"`
        Override bool `json:"override"`
        Enabled bool `json:"enabled"`
    }
    UpdateReplicationPolicyResponse {
        Message string `json:"message"`
    }

    DeleteReplicationPolicyRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        PolicyId int64 `path:"policyId" validate:"required"`
    }
    DeleteReplicationPolicyResponse {
        Message string `json:"message"`
    }

    ExecuteReplicationPolicyRequest {
        RegistryUuid string `json:"registryUuid" validate:"required"`
        PolicyId int64 `json:"policyId" validate:"required"`
    }
    ExecuteReplicationPolicyResponse {
        ExecutionId int64 `json:"executionId"`
        Message string `json:"message"`
    }

    ListReplicationExecutionsRequest {
        RegistryUuid string `form:"registryUuid" validate:"required"`
        PolicyId int64 `form:"policyId" validate:"required"`
        Page int64 `form:"page,default=1" validate:"min=1"`
        PageSize int64 `form:"pageSize,default=20" validate:"min=1,max=100"`
    }
    ListReplicationExecutionsResponse {
        Items []ReplicationExecution `json:"items"`
        Total int64 `json:"total"`
        Page int64 `json:"page"`
        PageSize int64 `json:"pageSize"`
        TotalPages int64 `json:"totalPages"`
    }
)


@server(
    middleware: JWTAuthMiddleware
    group: registry
    prefix: /console/v1/registry
)

service console-api {
    // ============ é•œåƒä»“åº“ç®¡ç†ï¼ˆç®¡ç†å‘˜æ“ä½œï¼‰============
    @doc "åˆ›å»ºé•œåƒä»“åº“"
    @handler CreateRegistryHandler
    post /registries (CreateRegistryRequest) returns (string)

    @doc "æ›´æ–°é•œåƒä»“åº“"
    @handler UpdateRegistryHandler
    put /registries/:id (UpdateRegistryRequest) returns (string)

    @doc "åˆ é™¤é•œåƒä»“åº“"
    @handler DeleteRegistryHandler
    delete /registries/:id (DeleteRegistryRequest) returns (string)

    @doc "æ ¹æ®UUIDæŸ¥è¯¢ä»“åº“"
    @handler GetRegistryByUuidHandler
    get /registries/uuid/:uuid (GetRegistryByUuidRequest) returns (GetRegistryByUuidResponse)

    @doc "è·å–ä»“åº“è¯¦æƒ…"
    @handler GetRegistryDetailsHandler
    get /registries/:uuid/details (GetRegistryDetailsRequest) returns (GetRegistryDetailsResponse)

    @doc "æµ‹è¯•ä»“åº“è¿æ¥"
    @handler TestRegistryConnectionHandler
    post /registries/test-connection (TestRegistryConnectionRequest) returns (string)

    // ============ ä»“åº“æŸ¥è¯¢ï¼ˆç®¡ç†å‘˜è§†è§’ + é¡¹ç›®è§†è§’ï¼‰============

    @doc "æŸ¥è¯¢æ‰€æœ‰ä»“åº“ï¼ˆç®¡ç†å‘˜ï¼‰"
    @handler ListRegistriesHandler
    get /registries (ListRegistriesRequest) returns (ListRegistriesResponse)

    @doc "æŸ¥è¯¢é¡¹ç›®å…³è”çš„ä»“åº“ï¼ˆé¡¹ç›®è§†è§’ï¼‰"
    @handler ListRegistriesByProjectHandler
    get /registries/by-project (ListRegistriesByProjectRequest) returns (ListRegistriesByProjectResponse)

    // ============ ä»“åº“ä¸é›†ç¾¤å…³è”ï¼ˆç®¡ç†å‘˜æ“ä½œï¼‰============

    @doc "ç»‘å®šä»“åº“åˆ°é›†ç¾¤"
    @handler BindRegistryToClusterHandler
    post /registry-clusters (BindRegistryToClusterRequest) returns (string)

    @doc "è§£ç»‘ä»“åº“ä¸é›†ç¾¤"
    @handler UnbindRegistryFromClusterHandler
    delete /registry-clusters/:id (UnbindRegistryFromClusterRequest) returns (string)

    @doc "æŸ¥è¯¢é›†ç¾¤çš„ä»“åº“åˆ—è¡¨"
    @handler ListClusterRegistriesHandler
    get /registry-clusters/by-cluster (ListClusterRegistriesRequest) returns (ListClusterRegistriesResponse)

    @doc "æŸ¥è¯¢ä»“åº“çš„é›†ç¾¤åˆ—è¡¨"
    @handler ListRegistryClustersHandler
    get /registry-clusters/by-registry (ListRegistryClustersRequest) returns (ListRegistryClustersResponse)

    // ============ ä»“åº“é¡¹ç›®ä¸åº”ç”¨é¡¹ç›®ç»‘å®šï¼ˆç®¡ç†å‘˜æ“ä½œï¼‰============

    @doc "ç»‘å®šä»“åº“é¡¹ç›®åˆ°åº”ç”¨é¡¹ç›®"
    @handler BindRegistryProjectHandler
    post /project-bindings (BindRegistryProjectRequest) returns (string)

    @doc "è§£ç»‘ä»“åº“é¡¹ç›®"
    @handler UnbindRegistryProjectHandler
    delete /project-bindings/:id (UnbindRegistryProjectRequest) returns (string)

    @doc "æŸ¥è¯¢åº”ç”¨é¡¹ç›®çš„ä»“åº“é¡¹ç›®ç»‘å®š"
    @handler ListProjectRegistryBindingsHandler
    get /project-bindings (ListProjectRegistryBindingsRequest) returns (ListProjectRegistryBindingsResponse)

    // ============ ä»“åº“é¡¹ç›®æ“ä½œ============

    @doc "æŸ¥è¯¢ä»“åº“æ‰€æœ‰é¡¹ç›®ï¼ˆç®¡ç†å‘˜ï¼‰"
    @handler ListProjectsHandler
    get /projects (ListProjectsRequest) returns (ListProjectsResponse)

    @doc "æŸ¥è¯¢åº”ç”¨é¡¹ç›®å…³è”çš„ä»“åº“é¡¹ç›®ï¼ˆé¡¹ç›®è§†è§’ï¼‰"
    @handler ListProjectsByAppHandler
    get /projects/by-app (ListProjectsByAppRequest) returns (ListProjectsByAppResponse)

    @doc "è·å–é¡¹ç›®è¯¦æƒ…"
    @handler GetProjectHandler
    get /projects/:projectName (GetProjectRequest) returns (GetProjectResponse)

    @doc "åˆ›å»ºä»“åº“é¡¹ç›®"
    @handler CreateProjectHandler
    post /projects (CreateProjectRequest) returns (string)

    @doc "æ›´æ–°ä»“åº“é¡¹ç›®"
    @handler UpdateProjectHandler
    put /projects/:projectName (UpdateProjectRequest) returns (string)

    @doc "åˆ é™¤ä»“åº“é¡¹ç›®"
    @handler DeleteProjectHandler
    delete /projects/:projectName (DeleteProjectRequest) returns (string)

    // ============ Repository æ“ä½œ ============

    @doc "æŸ¥è¯¢ä»“åº“åˆ—è¡¨"
    @handler ListRepositoriesHandler
    get /repositories (ListRepositoriesRequest) returns (ListRepositoriesResponse)

    @doc "è·å–ä»“åº“è¯¦æƒ…"
    @handler GetRepositoryHandler
    get /repositories/:repoName (GetRepositoryRequest) returns (GetRepositoryResponse)

    @doc "åˆ é™¤ä»“åº“"
    @handler DeleteRepositoryHandler
    delete /repositories/:repoName (DeleteRepositoryRequest) returns (string)

    // ============ åˆ¶å“/æ ‡ç­¾æ“ä½œ ============

    @doc "æŸ¥è¯¢åˆ¶å“åˆ—è¡¨"
    @handler ListArtifactsHandler
    get /artifacts (ListArtifactsRequest) returns (ListArtifactsResponse)

    @doc "è·å–åˆ¶å“è¯¦æƒ…"
    @handler GetArtifactHandler
    get /artifacts/:reference (GetArtifactRequest) returns (GetArtifactResponse)

    @doc "åˆ é™¤åˆ¶å“"
    @handler DeleteArtifactHandler
    delete /artifacts/:reference (DeleteArtifactRequest) returns (string)

    @doc "åˆ é™¤æ ‡ç­¾"
    @handler DeleteTagHandler
    delete /tags/:tagName (DeleteTagRequest) returns (string)

    // ============ é•œåƒæœç´¢ ============

    @doc "å…¨å±€æœç´¢é•œåƒï¼ˆç®¡ç†å‘˜ï¼‰"
    @handler SearchImagesGlobalHandler
    get /images/search/global (SearchImagesGlobalRequest) returns (SearchImagesGlobalResponse)

    @doc "å…¨å±€æœç´¢é•œåƒï¼ˆé¡¹ç›®è§†è§’ï¼‰"
    @handler SearchImagesGlobalByProjectHandler
    get /images/search/global-by-project (SearchImagesGlobalByProjectRequest) returns (SearchImagesGlobalByProjectResponse)

    @doc "ä»“åº“å†…æœç´¢é•œåƒï¼ˆç®¡ç†å‘˜ï¼‰"
    @handler SearchImagesInRegistryHandler
    get /images/search/in-registry (SearchImagesInRegistryRequest) returns (SearchImagesInRegistryResponse)

    @doc "ä»“åº“å†…æœç´¢é•œåƒï¼ˆé¡¹ç›®è§†è§’ï¼‰"
    @handler SearchImagesInRegistryByProjectHandler
    get /images/search/in-registry-by-project (SearchImagesInRegistryByProjectRequest) returns (SearchImagesInRegistryByProjectResponse)

    // ============ é…é¢ç®¡ç† ============

    @doc "è·å–é¡¹ç›®é…é¢"
    @handler GetProjectQuotaHandler
    get /quota/:projectName (GetProjectQuotaRequest) returns (GetProjectQuotaResponse)

    @doc "æ›´æ–°é¡¹ç›®é…é¢"
    @handler UpdateProjectQuotaHandler
    put /quota/:projectName (UpdateProjectQuotaRequest) returns (string)

    // ============ é¡¹ç›®æˆå‘˜ç®¡ç† ============
    @doc "åˆ—å‡ºé¡¹ç›®æˆå‘˜"
    @handler ListProjectMembersHandler
    get /project-members (ListProjectMembersRequest) returns (ListProjectMembersResponse)

    @doc "è·å–é¡¹ç›®æˆå‘˜è¯¦æƒ…"
    @handler GetProjectMemberHandler
    get /project-members/:memberId (GetProjectMemberRequest) returns (GetProjectMemberResponse)

    @doc "æ·»åŠ é¡¹ç›®æˆå‘˜"
    @handler AddProjectMemberHandler
    post /project-members (AddProjectMemberRequest) returns (string)

    @doc "æ›´æ–°é¡¹ç›®æˆå‘˜è§’è‰²"
    @handler UpdateProjectMemberHandler
    put /project-members/:memberId (UpdateProjectMemberRequest) returns (string)

    @doc "åˆ é™¤é¡¹ç›®æˆå‘˜"
    @handler DeleteProjectMemberHandler
    delete /project-members/:memberId (DeleteProjectMemberRequest) returns (string)

    // ============ å…¨å±€ç”¨æˆ·ç®¡ç† ============
    @doc "åˆ›å»ºHarborç”¨æˆ·"
    @handler CreateUserHandler
    post /users (CreateUserRequest) returns (string)

    @doc "åˆ—å‡ºHarborç”¨æˆ·"
    @handler ListUsersHandler
    get /users (ListUsersRequest) returns (ListUsersResponse)

    @doc "è·å–Harborç”¨æˆ·è¯¦æƒ…"
    @handler GetUserHandler
    get /users/:userId (GetUserRequest) returns (GetUserResponse)

    @doc "æ›´æ–°Harborç”¨æˆ·"
    @handler UpdateUserHandler
    put /users/:userId (UpdateUserRequest) returns (string)

    @doc "åˆ é™¤Harborç”¨æˆ·"
    @handler DeleteUserHandler
    delete /users/:userId (DeleteUserRequest) returns (string)

    @doc "ä¿®æ”¹ç”¨æˆ·å¯†ç "
    @handler ChangeUserPasswordHandler
    put /users/:userId/password (ChangeUserPasswordRequest) returns (string)

    @doc "è®¾ç½®ç”¨æˆ·ç®¡ç†å‘˜æƒé™"
    @handler SetUserAdminHandler
    put /users/:userId/admin (SetUserAdminRequest) returns (string)


    // ============ åƒåœ¾å›æ”¶ç®¡ç† ============
    @doc "åˆ—å‡ºGCå†å²"
    @handler ListGCHistoryHandler
    get /gc/history (ListGCHistoryRequest) returns (ListGCHistoryResponse)

    @doc "è·å–GCè¯¦æƒ…"
    @handler GetGCHandler
    get /gc/:gcId (GetGCRequest) returns (GetGCResponse)

    @doc "è·å–GCæ—¥å¿—"
    @handler GetGCLogHandler
    get /gc/:gcId/log (GetGCLogRequest) returns (GetGCLogResponse)

    @doc "è·å–GCè°ƒåº¦é…ç½®"
    @handler GetGCScheduleHandler
    get /gc/schedule (GetGCScheduleRequest) returns (GetGCScheduleResponse)

    @doc "æ›´æ–°GCè°ƒåº¦é…ç½®"
    @handler UpdateGCScheduleHandler
    put /gc/schedule (UpdateGCScheduleRequest) returns (string)

    @doc "æ‰‹åŠ¨è§¦å‘GC"
    @handler TriggerGCHandler
    post /gc/trigger (TriggerGCRequest) returns (string)

    // ============ ä¿ç•™ç­–ç•¥ç®¡ç† ============
    @doc "è·å–é¡¹ç›®ä¿ç•™ç­–ç•¥"
    @handler GetRetentionPolicyHandler
    get /retention/policy (GetRetentionPolicyRequest) returns (GetRetentionPolicyResponse)

    @doc "åˆ›å»ºä¿ç•™ç­–ç•¥"
    @handler CreateRetentionPolicyHandler
    post /retention/policy (CreateRetentionPolicyRequest) returns (string)

    @doc "æ›´æ–°ä¿ç•™ç­–ç•¥"
    @handler UpdateRetentionPolicyHandler
    put /retention/policy (UpdateRetentionPolicyRequest) returns (string)

    @doc "æ‰§è¡Œä¿ç•™ç­–ç•¥"
    @handler ExecuteRetentionPolicyHandler
    post /retention/policy/execute (ExecuteRetentionPolicyRequest) returns (string)

    @doc "åˆ—å‡ºä¿ç•™ç­–ç•¥æ‰§è¡Œå†å²"
    @handler ListRetentionExecutionsHandler
    get /retention/executions (ListRetentionExecutionsRequest) returns (ListRetentionExecutionsResponse)

    // ============ å¤åˆ¶ç­–ç•¥ç®¡ç† ============
    @doc "åˆ—å‡ºå¤åˆ¶ç­–ç•¥"
    @handler ListReplicationPoliciesHandler
    get /replication/policies (ListReplicationPoliciesRequest) returns (ListReplicationPoliciesResponse)

    @doc "è·å–å¤åˆ¶ç­–ç•¥"
    @handler GetReplicationPolicyHandler
    get /replication/policies/:policyId (GetReplicationPolicyRequest) returns (GetReplicationPolicyResponse)

    @doc "åˆ›å»ºå¤åˆ¶ç­–ç•¥"
    @handler CreateReplicationPolicyHandler
    post /replication/policies (CreateReplicationPolicyRequest) returns (string)

    @doc "æ›´æ–°å¤åˆ¶ç­–ç•¥"
    @handler UpdateReplicationPolicyHandler
    put /replication/policies/:policyId (UpdateReplicationPolicyRequest) returns (string)

    @doc "åˆ é™¤å¤åˆ¶ç­–ç•¥"
    @handler DeleteReplicationPolicyHandler
    delete /replication/policies/:policyId (DeleteReplicationPolicyRequest) returns (string)

    @doc "æ‰§è¡Œå¤åˆ¶ç­–ç•¥"
    @handler ExecuteReplicationPolicyHandler
    post /replication/policies/execute (ExecuteReplicationPolicyRequest) returns (string)

    @doc "åˆ—å‡ºå¤åˆ¶æ‰§è¡Œå†å²"
    @handler ListReplicationExecutionsHandler
    get /replication/executions (ListReplicationExecutionsRequest) returns (ListReplicationExecutionsResponse)
}